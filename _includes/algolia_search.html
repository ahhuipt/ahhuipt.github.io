<div id="docsearch" class="docsearch-container" style="margin-bottom: 20px;"></div>

<style>
  .docsearch-container {
    max-width: 100%;
  }
  .docsearch {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
  }
  .docsearch-input-container {
    width: 100% !important;
  }
  .docsearch-input {
    width: 100% !important;
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
<script>
  document.addEventListener('DOMContentLoaded', function() {
    docsearch({
      container: '#docsearch',
      appId: '{{ site.algolia.application_id }}',
      indexName: '{{ site.algolia.index_name }}',
      apiKey: '{{ site.algolia.search_only_api_key }}',
      transformItems: function(items) {
        return items.map(function(item) {
          // 修复 URL 路径问题
          item.url = item.url.replace('/ahhuipt.github.io', '');
          return item;
        });
      },
      translations: {
        placeholder: '搜索文章...',
        button: {
          buttonText: '搜索',
          buttonAriaLabel: '搜索'
        }
      }
    });
  });
</script>